<view class="container">
  <!-- 顶部导航栏 -->
  <view class="header">
    <view class="search-box">
      <input 
        class="search-input" 
        placeholder="搜索任务" 
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
      />
      <button class="search-btn" bindtap="onSearch">搜索</button>
    </view>
  </view>

  <!-- 筛选和排序 -->
  <view class="filter-bar">
    <view class="filter-item {{sortBy === 0 ? 'active' : ''}}" bindtap="onSortChange" data-sort="0">
      <text>积分最高</text>
    </view>
    <view class="filter-item {{sortBy === 1 ? 'active' : ''}}" bindtap="onSortChange" data-sort="1">
      <text>时间最近</text>
    </view>
  </view>

  <!-- 任务列表 -->
  <view class="task-list">
    <block wx:if="{{taskList.length > 0}}">
      <view 
        class="task-card" 
        wx:for="{{taskList}}" 
        wx:key="id"
        bindtap="onTaskTap"
        data-task-id="{{item.id}}"
      >
        <view class="task-info">
          <text class="task-title">{{item.taskTitle}}</text>
          <text class="task-description">{{item.taskDescription}}</text>
        </view>
        <view class="task-meta">
          <view class="task-points">
            <text class="points-label">积分：</text>
            <text class="points-value">{{item.pointAmount}}</text>
          </view>
          <view class="task-time">
            <text class="time-label">截止时间：</text>
            <text class="time-value">{{item.expectedCompletionTime}}</text>
          </view>
        </view>
        <view class="task-status">
          <text class="status-text" wx:if="{{item.taskStatus === 0}}">待接单</text>
          <text class="status-text processing" wx:elif="{{item.taskStatus === 1}}">配送中</text>
          <text class="status-text completed" wx:elif="{{item.taskStatus === 2}}">已完成</text>
          <text class="status-text issued" wx:elif="{{item.taskStatus === 3}}">积分已发放</text>
          <text class="status-text cancelled" wx:elif="{{item.taskStatus === 4}}">已取消</text>
        </view>
      </view>
    </block>
    <block wx:else>
      <view class="empty-list">
        <text>暂无任务</text>
      </view>
    </block>
  </view>

  <!-- 加载更多 -->
  <view class="load-more" wx:if="{{hasMore}}">
    <text bindtap="onLoadMore">加载更多</text>
  </view>

  <!-- 悬浮创建按钮 -->
  <button class="create-btn" bindtap="onCreateTask">
    <text class="create-btn-text">+</text>
  </button>
</view>
